(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[450],{2442:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6141:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2549:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1944:function(e,t,s){Promise.resolve().then(s.bind(s,8566))},9313:function(e,t,s){"use strict";s.d(t,{z:function(){return l}});var a=s(7437),r=s(1657);let l=(0,s(2265).forwardRef)((e,t)=>{let{children:s,className:l,variant:n="primary",size:d="md",...c}=e;return(0,a.jsx)("button",{ref:t,className:(0,r.cn)("inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 dark:bg-blue-600 dark:text-white dark:hover:bg-blue-700",secondary:"bg-slate-200 text-slate-900 hover:bg-slate-300 focus:ring-slate-500 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600",outline:"border border-slate-300 text-slate-700 hover:bg-slate-50 focus:ring-slate-500 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800 dark:bg-transparent"}[n],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[d],l),...c,children:s})});l.displayName="Button"},1543:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7437),r=s(1657);function l(e){let{children:t,className:s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700","text-slate-800 dark:text-slate-100 shadow-sm hover:shadow-md transition-shadow duration-200","rounded-2xl",s),children:t})}},4203:function(e,t,s){"use strict";s.d(t,{I:function(){return l}});var a=s(7437),r=s(1657);let l=(0,s(2265).forwardRef)((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)("input",{ref:t,className:(0,r.cn)("flex h-10 w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm","placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","disabled:cursor-not-allowed disabled:opacity-50","dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100 dark:placeholder:text-slate-400",s),...l})});l.displayName="Input"},8566:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(7437),r=s(2265),l=s(1543),n=s(9313),d=s(4203),c=s(4518),o=s(6141),i=s(7972),u=s(2442),m=s(2549);function x(e){let{roomCode:t,settings:s}=e,[x,p]=(0,r.useState)(""),[h,b]=(0,r.useState)(""),[f,g]=(0,r.useState)([]),[y,N]=(0,r.useState)([]),[k,j]=(0,r.useState)(!1),[v,w]=(0,r.useState)(!1),[I,S]=(0,r.useState)(0),[C,Z]=(0,r.useState)(!1),[M,z]=(0,r.useState)({}),[_,E]=(0,r.useState)(30),[O,R]=(0,r.useState)(!1),{broadcast:J,messages:q}=(0,c.r)(null!=t?t:"","rhymeguessr"),A="true"===sessionStorage.getItem("isHost"),X=async()=>{if(A){if(I>=5){Z(!0),J({type:"game_end",data:{players:M}});return}try{let e=["chat","soleil","fleur","maison","arbre","voiture","mer","ciel","oiseau","livre"],t=e[Math.floor(Math.random()*e.length)];p(t),S(e=>e+1),j(!1),b(""),g([]),N([]),E(30),R(!1),w(!0),J({type:"round_start",data:{word:t,roundNumber:I+1}})}catch(e){console.error("Erreur d\xe9marrage manche:",e)}}},B=()=>{if(!h.trim()||k||y.includes(sessionStorage.getItem("playerName")||""))return;let e=sessionStorage.getItem("playerName")||"Anonyme";J({type:"player_answer",data:{player:e,answer:h.trim()}}),N(t=>[...t,e])},P=async()=>{if(!A)return;let e=sessionStorage.getItem("playerName")||"Anonyme",t=f.filter(t=>t.player!==e).map(e=>({...e,isCorrect:e.answer.toLowerCase().includes(x.slice(-2))||Math.random()>.5})),s=h.trim();s&&t.push({player:e,answer:s,isCorrect:Math.random()>.5}),g(t),j(!0),R(!0);let a={...M};t.forEach(e=>{e.isCorrect&&(a[e.player]=(a[e.player]||0)+10)}),z(a),J({type:"round_end",data:{results:t,players:a}})};return((0,r.useEffect)(()=>{let e;return v&&!O&&_>0&&(e=setInterval(()=>{E(e=>e<=1?(R(!0),A&&P(),0):e-1)},1e3)),()=>clearInterval(e)},[v,O,_,A]),(0,r.useEffect)(()=>{let e=q[q.length-1];e&&("round_start"===e.type?(p(e.data.word),S(e.data.roundNumber),j(!1),b(""),g([]),N([]),E(30),R(!1),w(!0)):"player_answer"===e.type?(g(t=>[...t,{player:e.data.player,answer:e.data.answer,isCorrect:!1}]),N(t=>[...t,e.data.player])):"round_end"===e.type?(g(e.data.results),z(e.data.players),j(!0),R(!0)):"game_end"===e.type&&(z(e.data.players),Z(!0)))},[q]),C)?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 dark:from-slate-900 dark:to-purple-950 p-4 sm:p-6 game-layout text-slate-800 dark:text-slate-100",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)(l.Z,{className:"p-6 sm:p-8 text-center",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100 mb-6",children:"Partie termin\xe9e !"}),(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(M).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s}).map((e,t)=>{let[s,r]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 rounded-xl ".concat(0===t?"bg-amber-100 dark:bg-amber-900/40":"bg-slate-100 dark:bg-slate-800"),children:[(0,a.jsxs)("span",{className:"font-semibold text-slate-800 dark:text-slate-100",children:[t+1,". ",s]}),(0,a.jsxs)("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:[r," points"]})]},s)})}),(0,a.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,a.jsx)(n.z,{onClick:()=>window.location.reload(),className:"rounded-xl w-full",children:"Rejouer"}),(0,a.jsx)(n.z,{onClick:()=>window.location.href="/",variant:"outline",className:"rounded-xl w-full",children:"Quitter"})]})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 dark:from-slate-900 dark:to-purple-950 p-4 sm:p-6 game-layout text-slate-800 dark:text-slate-100",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-6 sm:mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100 mb-2",children:"RhymeGuessr"}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-400",children:"Trouve un mot qui rime avec le mot donn\xe9!"})]}),v?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-slate-600 dark:text-slate-300",children:["Manche ",I," sur ",5]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full ".concat(_<=10?"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300":"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"),children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{className:"font-semibold",children:[_,"s"]})]})]}),(0,a.jsx)("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-1000",style:{width:"".concat(_/30*100,"%")}})}),(0,a.jsxs)(l.Z,{className:"p-8 text-center rounded-2xl",children:[(0,a.jsx)("h2",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-2",children:"Trouve un mot qui rime avec:"}),(0,a.jsx)("div",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:x}),k?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"R\xe9ponses:"}),(0,a.jsx)("div",{className:"space-y-2",children:f.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg ".concat(e.isCorrect?"bg-green-100 dark:bg-green-900":"bg-red-100 dark:bg-red-900"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:e.player}),(0,a.jsxs)("span",{className:"text-slate-600 dark:text-slate-400",children:["• ",e.answer]})]}),e.isCorrect?(0,a.jsx)(u.Z,{className:"h-5 w-5 text-green-600"}):(0,a.jsx)(m.Z,{className:"h-5 w-5 text-red-600"})]},t))}),A&&(0,a.jsx)(n.z,{onClick:X,className:"rounded-xl w-full",children:I>=5?"Voir les r\xe9sultats":"Manche suivante"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(d.I,{value:h,onChange:e=>b(e.target.value),placeholder:"Tape ta r\xe9ponse...",className:"rounded-xl text-center text-lg",onKeyPress:e=>"Enter"===e.key&&B(),disabled:y.includes(sessionStorage.getItem("playerName")||"")}),(0,a.jsx)(n.z,{onClick:B,className:"rounded-xl w-full",disabled:!h.trim()||y.includes(sessionStorage.getItem("playerName")||""),children:y.includes(sessionStorage.getItem("playerName")||"")?"R\xe9ponse envoy\xe9e":"Valider"})]})]}),y.length>0&&(0,a.jsx)(l.Z,{className:"p-4 rounded-2xl",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:y.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-1 px-3 py-1 bg-slate-200 dark:bg-slate-700 rounded-full text-sm text-slate-800 dark:text-slate-100",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[e," a r\xe9pondu ✅"]})]},e))})})]}):(0,a.jsxs)(l.Z,{className:"p-8 text-center rounded-2xl",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Pr\xeat \xe0 jouer?"}),(0,a.jsxs)("p",{className:"text-slate-600 dark:text-slate-300 mb-6",children:[5," manches • 10 points par bonne r\xe9ponse • ",30," secondes par manche"]}),A?(0,a.jsx)(n.z,{onClick:X,className:"rounded-xl w-full",children:"Commencer la partie"}):(0,a.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"En attente de l'h\xf4te pour d\xe9marrer..."})]})]})})}},4518:function(e,t,s){"use strict";s.d(t,{r:function(){return l}});var a=s(2265);let r=(0,s(3226).eI)("https://vyatvqwsoqalbnbcmhqm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ5YXR2cXdzb3FhbGJuYmNtaHFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE3ODkzMDcsImV4cCI6MjA4NzM2NTMwN30.KoTP3iOZmvbzB8RjHlmWIyvdMVpfqoia3-MQxbdL1sY");function l(e,t){let[s,l]=(0,a.useState)([]),[n,d]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let s=r.channel("room:".concat(e));return s.on("presence",{event:"sync"},()=>{l(Object.values(s.presenceState()).flat())}).on("presence",{event:"join"},e=>{let{key:t,newPresences:s}=e;console.log("Nouveau joueur:",s)}).on("presence",{event:"leave"},e=>{let{key:t,leftPresences:s}=e;console.log("Joueur parti:",s)}).on("broadcast",{event:t},e=>{let{payload:t}=e;d(e=>[...e,t])}).subscribe(async e=>{"SUBSCRIBED"===e&&await s.track({playerName:sessionStorage.getItem("playerName")||"Anonyme",gameType:t,joinedAt:new Date().toISOString()})}),()=>{s.unsubscribe()}},[e,t]),{broadcast:s=>{r.channel("room:".concat(e)).send({type:"broadcast",event:t,payload:s})},presence:s,messages:n}}},1657:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var a=s(7042),r=s(4769);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[61,293,971,938,744],function(){return e(e.s=1944)}),_N_E=e.O()}]);