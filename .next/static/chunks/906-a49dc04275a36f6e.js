"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[906],{9313:function(e,t,s){s.d(t,{z:function(){return n}});var a=s(7437),r=s(1657);let n=(0,s(2265).forwardRef)((e,t)=>{let{children:s,className:n,variant:l="primary",size:o="md",...i}=e;return(0,a.jsx)("button",{ref:t,className:(0,r.cn)("inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 dark:bg-blue-600 dark:text-white dark:hover:bg-blue-700",secondary:"bg-slate-200 text-slate-900 hover:bg-slate-300 focus:ring-slate-500 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600",outline:"border border-slate-300 text-slate-700 hover:bg-slate-50 focus:ring-slate-500 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800 dark:bg-transparent",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800"}[l],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[o],n),...i,children:s})});n.displayName="Button"},8748:function(e,t,s){s.d(t,{Z:function(){return d}});var a=s(7437),r=s(2265),n=s(2442),l=s(6224),o=s(6141),i=s(7972);function d(e){let{header:t,main:s,footer:d,playersBar:c,children:u,players:m,roundCount:f,maxRounds:x,timer:h,gameCode:p,gameTitle:g,isHost:b,gameStarted:w,onStartGame:_,timeLeft:v,typingPlayer:y}=e,[N,j]=(0,r.useState)(!1);return t||s||d?(0,a.jsxs)("div",{className:"min-h-screen bg-slate-950 text-slate-50 flex flex-col font-sans relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-600/10 rounded-full blur-[100px]"}),(0,a.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-600/10 rounded-full blur-[100px]"})]}),(0,a.jsx)("header",{className:"sticky top-0 z-10 p-4",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:t})}),(0,a.jsx)("main",{className:"flex-1 flex flex-col items-center justify-center p-4 z-10 w-full max-w-4xl mx-auto",children:s||u}),(0,a.jsx)("footer",{className:"sticky bottom-0 z-10 p-4 bg-slate-950/80 backdrop-blur-sm border-t border-slate-800/50",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto flex flex-col gap-4",children:[c,d]})})]}):(0,a.jsxs)("main",{className:"min-h-screen bg-slate-950 text-white flex flex-col relative overflow-hidden font-sans",children:[(0,a.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-600/20 rounded-full blur-[100px]"}),(0,a.jsx)("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-600/20 rounded-full blur-[100px]"})]}),(0,a.jsxs)("header",{className:"w-full max-w-6xl mx-auto p-4 flex items-center justify-between z-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400",children:g}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-white/5 rounded-full border border-white/10 cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>{p&&(navigator.clipboard.writeText(p),j(!0),setTimeout(()=>j(!1),2e3))},children:[(0,a.jsxs)("span",{className:"text-sm font-mono text-gray-400",children:["#",p]}),N?(0,a.jsx)(n.Z,{className:"w-3 h-3 text-green-400"}):(0,a.jsx)(l.Z,{className:"w-3 h-3 text-gray-500"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[w&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Manche"}),(0,a.jsxs)("span",{className:"font-mono font-bold",children:[f,"/",x]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full border ".concat(5>=(v||0)&&w?"bg-red-500/20 border-red-500/50 text-red-400 animate-pulse":"bg-white/5 border-white/10 text-white"),children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"font-mono font-bold min-w-[3ch] text-center",children:h})]})]})]}),(0,a.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center p-4 w-full max-w-6xl mx-auto z-10",children:u}),(0,a.jsx)("footer",{className:"w-full bg-black/20 backdrop-blur-md border-t border-white/5 p-4 z-10",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto flex flex-col gap-2",children:[y&&(0,a.jsxs)("div",{className:"text-xs text-gray-400 animate-pulse mb-2",children:[y," est en train d'\xe9crire..."]}),(0,a.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-4",children:m&&Object.entries(m).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s}).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-white/5 px-3 py-1.5 rounded-full border border-white/10",children:[(0,a.jsx)(i.Z,{className:"w-3 h-3 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:t}),(0,a.jsx)("span",{className:"text-xs font-mono bg-white/10 px-1.5 py-0.5 rounded text-gray-300",children:s})]},t)})})]})})]})}},1291:function(e,t,s){s.d(t,{d:function(){return n}});var a=s(2265),r=s(4599);function n(e,t){let[s,n]=(0,a.useState)("waiting"),[l,o]=(0,a.useState)([]),[i,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),[m,f]=(0,a.useState)(null),[x,h]=(0,a.useState)(null),p=(0,a.useRef)(null);(0,a.useEffect)(()=>{e&&(async()=>{let t;let{data:s,error:a}=await r.O.from("rooms").select("*").eq("code",e).single();if(a||!s){console.error("Room not found:",a);return}h(s.id),n(s.status);let l=sessionStorage.getItem("playerName")||"Player-".concat(Math.floor(1e3*Math.random())),i=sessionStorage.getItem("playerId");if(i){let{data:e}=await r.O.from("players").select("*").eq("id",i).single();e&&(t=e)}if(!t){let{data:e}=await r.O.from("players").select("*").eq("room_id",s.id).eq("name",l).single();e&&(t=e)}if(!t){let{data:e,error:a}=await r.O.from("players").insert({room_id:s.id,name:l,is_host:!s.host_id}).select().single();e&&(t=e,sessionStorage.setItem("playerId",e.id),s.host_id||(await r.O.from("rooms").update({host_id:e.id}).eq("id",s.id),await r.O.from("players").update({is_host:!0}).eq("id",e.id),u(!0)))}t&&(f(t.id),u(t.is_host),t.is_host&&s.host_id!==t.id&&await r.O.from("rooms").update({host_id:t.id}).eq("id",s.id));let{data:c}=await r.O.from("game_sessions").select("*").eq("room_id",s.id).single();if(c)d({current_round:c.current_round,total_rounds:c.total_rounds,round_data:c.round_data,answers:c.answers,status:c.status,settings:s.settings});else if(null==t?void 0:t.is_host){let{data:e}=await r.O.from("game_sessions").insert({room_id:s.id,status:"waiting",settings:s.settings}).select().single();e&&d(e)}let{data:m}=await r.O.from("players").select("*").eq("room_id",s.id);m&&o(m)})()},[e]),(0,a.useEffect)(()=>{if(!x)return;let e=r.O.channel("game_sync:".concat(x)).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:"id=eq.".concat(x)},e=>{e.new&&(n(e.new.status),i&&d(t=>t?{...t,settings:e.new.settings}:null))}).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:"room_id=eq.".concat(x)},async()=>{let{data:e}=await r.O.from("players").select("*").eq("room_id",x);e&&o(e)}).on("postgres_changes",{event:"*",schema:"public",table:"game_sessions",filter:"room_id=eq.".concat(x)},e=>{e.new&&d(t=>({...t,...e.new}))}).subscribe();return p.current=e,()=>{r.O.removeChannel(e)}},[x]);let g=async e=>{x&&c&&await r.O.from("rooms").update({settings:e}).eq("id",x)},b=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x&&c&&(await r.O.from("rooms").update({status:"in_game"}).eq("id",x),await r.O.from("game_sessions").update({status:"round_active",current_round:1,answers:{},round_data:e}).eq("room_id",x))},w=async e=>{if(!x||!m||!i)return;let t={...i.answers,[m]:{answer:e,time:Date.now()}};await r.O.from("game_sessions").update({answers:t}).eq("room_id",x)},_=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!x||!c||!i)return;let t=i.current_round+1;t>i.total_rounds?(await r.O.from("rooms").update({status:"finished"}).eq("id",x),await r.O.from("game_sessions").update({status:"game_over"}).eq("room_id",x)):await r.O.from("game_sessions").update({current_round:t,answers:{},status:"round_active",round_data:e}).eq("room_id",x)},v=async e=>{x&&c&&await r.O.from("game_sessions").update({round_data:e}).eq("room_id",x)},y=async e=>{x&&c&&await r.O.from("game_sessions").update({status:e}).eq("room_id",x)},N=async(e,t)=>{x&&c&&await r.O.from("players").update({score:t}).eq("id",e)};return{roomStatus:s,players:l,gameState:i,isHost:c,playerId:m,updateSettings:g,startGame:b,submitAnswer:w,nextRound:_,updateRoundData:v,setGameStatus:y,updatePlayerScore:N}}},4599:function(e,t,s){s.d(t,{O:function(){return a}});let a=(0,s(3226).eI)("https://vyatvqwsoqalbnbcmhqm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ5YXR2cXdzb3FhbGJuYmNtaHFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE3ODkzMDcsImV4cCI6MjA4NzM2NTMwN30.KoTP3iOZmvbzB8RjHlmWIyvdMVpfqoia3-MQxbdL1sY")},1657:function(e,t,s){s.d(t,{cn:function(){return n}});var a=s(7042),r=s(4769);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}}]);