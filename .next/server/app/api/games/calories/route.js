"use strict";(()=>{var e={};e.id=503,e.ids=[503],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6954:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>f,originalPathname:()=>k,patchFetch:()=>y,requestAsyncStorage:()=>m,routeModule:()=>g,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>_});var a={};t.r(a),t.d(a,{GET:()=>p,dynamic:()=>c});var o=t(5419),n=t(9108),s=t(9678),i=t(8070);let c="force-dynamic",l=["snack","beverage","cheese","dessert","pizza","sandwich","breakfast","burger","cake","chocolate","fruit","vegetable"];async function u(e){try{let r=l[Math.floor(Math.random()*l.length)],t=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${r}&search_simple=1&action=process&json=1&page_size=${Math.max(20,2*e)}&page=${Math.floor(10*Math.random())+1}&fields=product_name,image_front_url,nutriments,quantity`,a=await fetch(t);if(!a.ok)throw Error("OFF API Error");let o=await a.json();if(!o.products)return[];let n=o.products.filter(e=>e.product_name&&e.product_name.length<50&&e.image_front_url&&(e.nutriments["energy-kcal_100g"]||e.nutriments["energy-kcal"])).map(e=>{let t=e.nutriments["energy-kcal_100g"]||e.nutriments["energy-kcal"];return{category:r,image:e.image_front_url,profile:{label:e.product_name,min:0,max:1e3,exact:Math.round(t),portion:"100g"}}});for(let e=n.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[n[e],n[r]]=[n[r],n[e]]}return n.slice(0,e)}catch(e){return console.error("Erreur API Open Food Facts:",e),[]}}async function p(e){try{let{searchParams:r}=new URL(e.url),t=parseInt(r.get("count")||"1",10),a=await u(t);if(0===a.length)return i.Z.json([{category:"fallback",image:"https://images.openfoodfacts.org/images/products/302/933/000/3533/front_en.3.400.jpg",profile:{label:"Big Mac (Fallback)",min:0,max:1e3,exact:257,portion:"100g"}}]);return i.Z.json(a)}catch(e){return console.error("Erreur API CaloriesGuessr:",e),i.Z.json({error:"Erreur lors de la g\xe9n\xe9ration du jeu"},{status:500})}}let g=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/games/calories/route",pathname:"/api/games/calories",filename:"route",bundlePath:"app/api/games/calories/route"},resolvedPagePath:"C:\\Users\\masso\\Desktop\\IttolecHub\\app\\api\\games\\calories\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:d,serverHooks:h,headerHooks:f,staticGenerationBailout:_}=g,k="/api/games/calories/route";function y(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[638,206],()=>t(6954));module.exports=a})();