"use strict";(()=>{var e={};e.id=987,e.ids=[987],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2547:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>h,originalPathname:()=>f,patchFetch:()=>g,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>v});var o={};t.r(o),t.d(o,{POST:()=>c});var a=t(5419),s=t(9108),n=t(9678),u=t(8070),i=t(1664);async function c(e){try{let{playerName:r}=await e.json();if(!r||0===r.trim().length)return u.Z.json({error:"Le nom du joueur est requis"},{status:400});let t=function(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r="";for(let t=0;t<6;t++)r+=e.charAt(Math.floor(Math.random()*e.length));return r}(),{data:o,error:a}=await i.O.from("rooms").insert([{code:t,host_id:r.trim(),status:"waiting",settings:{maxPlayers:10,createdBy:r.trim()}}]).select().single();if(a)return console.error("Erreur cr\xe9ation room:",a),u.Z.json({error:"Erreur lors de la cr\xe9ation de la room"},{status:500});return u.Z.json({code:o.code})}catch(e){return console.error("Erreur serveur:",e),u.Z.json({error:"Erreur interne du serveur"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/rooms/create/route",pathname:"/api/rooms/create",filename:"route",bundlePath:"app/api/rooms/create/route"},resolvedPagePath:"C:\\Users\\masso\\Desktop\\IttolecHub\\app\\api\\rooms\\create\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:m,headerHooks:h,staticGenerationBailout:v}=l,f="/api/rooms/create/route";function g(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:p})}},1664:(e,r,t)=>{t.d(r,{O:()=>s});var o=t(3950);let a=process.env.SUPABASE_SERVICE_KEY,s=(0,o.eI)("https://vyatvqwsoqalbnbcmhqm.supabase.co",a)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[456,206,950],()=>t(2547));module.exports=o})();