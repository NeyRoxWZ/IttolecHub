"use strict";(()=>{var e={};e.id=169,e.ids=[169],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4694:(e,r,o)=>{o.r(r),o.d(r,{headerHooks:()=>h,originalPathname:()=>f,patchFetch:()=>y,requestAsyncStorage:()=>p,routeModule:()=>m,serverHooks:()=>j,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>v});var t={};o.r(t),o.d(t,{POST:()=>c,dynamic:()=>d});var s=o(5419),a=o(9108),n=o(9678),u=o(8070),i=o(1664);let d="force-dynamic";async function c(e){try{let{playerName:r,roomCode:o}=await e.json();if(!r||!o)return u.Z.json({error:"Le nom du joueur et le code de la room sont requis"},{status:400});let{data:t,error:s}=await i.O.from("rooms").select("*").eq("code",o.toUpperCase()).maybeSingle();if(s||!t)return u.Z.json({error:"Room non trouv\xe9e"},{status:404});let{data:a}=await i.O.from("players").select("*").eq("room_id",t.id).eq("name",r).maybeSingle();if(!a){let{error:e}=await i.O.from("players").insert({room_id:t.id,name:r,is_host:!1,score:0});if(e&&"23505"!==e.code)return console.error("Erreur ajout joueur:",e),u.Z.json({error:"Erreur lors de l'ajout du joueur"},{status:500})}return u.Z.json({success:!0,room:{code:t.code,host:t.host_id,status:t.status,gameType:t.game_type,settings:t.settings}})}catch(e){return console.error("Erreur rejoindre room:",e),u.Z.json({error:"Erreur interne du serveur"},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/rooms/join/route",pathname:"/api/rooms/join",filename:"route",bundlePath:"app/api/rooms/join/route"},resolvedPagePath:"C:\\Users\\masso\\Desktop\\IttolecHub\\app\\api\\rooms\\join\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:p,staticGenerationAsyncStorage:l,serverHooks:j,headerHooks:h,staticGenerationBailout:v}=m,f="/api/rooms/join/route";function y(){return(0,n.patchFetch)({serverHooks:j,staticGenerationAsyncStorage:l})}},1664:(e,r,o)=>{o.d(r,{O:()=>a});var t=o(3950);let s=process.env.SUPABASE_SERVICE_KEY,a=(0,t.eI)("https://vyatvqwsoqalbnbcmhqm.supabase.co",s)}};var r=require("../../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),t=r.X(0,[638,206,950],()=>o(4694));module.exports=t})();