exports.id=474,exports.ids=[474],exports.modules={1396:(e,t,s)=>{Promise.resolve().then(s.bind(s,8302))},4637:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},8302:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ThemeProvider:()=>l});var a=s(5344),r=s(3729);function l({children:e}){let{theme:t}=function(){let[e,t]=(0,r.useState)("dark");return(0,r.useEffect)(()=>{let e=localStorage.getItem("theme");e?t(e):t("dark")},[]),(0,r.useEffect)(()=>{"dark"===e?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[e]),{theme:e,toggleTheme:()=>{t(e=>"dark"===e?"light":"dark")}}}();return(0,r.useEffect)(()=>{"dark"===t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),a.jsx(a.Fragment,{children:e})}},3511:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var a=s(5344),r=s(1626);let l=(0,s(3729).forwardRef)(({children:e,className:t,variant:s="primary",size:l="md",...o},n)=>a.jsx("button",{ref:n,className:(0,r.cn)("inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 dark:bg-blue-600 dark:text-white dark:hover:bg-blue-700",secondary:"bg-slate-200 text-slate-900 hover:bg-slate-300 focus:ring-slate-500 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600",outline:"border border-slate-300 text-slate-700 hover:bg-slate-50 focus:ring-slate-500 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800 dark:bg-transparent",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800"}[s],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[l],t),...o,children:e}));l.displayName="Button"},6824:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var a=s(5344),r=s(3729),l=s(2312),o=s(1960),n=s(7189),i=s(8822);function d({header:e,main:t,footer:s,playersBar:d,children:m,players:c,roundCount:u,maxRounds:f,timer:x,gameCode:h,gameTitle:g,isHost:p,gameStarted:b,onStartGame:w,timeLeft:v,typingPlayer:y}){let[_,j]=(0,r.useState)(!1);return e||t||s?(0,a.jsxs)("div",{className:"min-h-screen bg-slate-950 text-slate-50 flex flex-col font-sans relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-600/10 rounded-full blur-[100px]"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-600/10 rounded-full blur-[100px]"})]}),a.jsx("header",{className:"sticky top-0 z-10 p-4",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:e})}),a.jsx("main",{className:"flex-1 flex flex-col items-center justify-center p-4 z-10 w-full max-w-4xl mx-auto",children:t||m}),a.jsx("footer",{className:"sticky bottom-0 z-10 p-4 bg-slate-950/80 backdrop-blur-sm border-t border-slate-800/50",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto flex flex-col gap-4",children:[d,s]})})]}):(0,a.jsxs)("main",{className:"min-h-screen bg-slate-950 text-white flex flex-col relative overflow-hidden font-sans",children:[(0,a.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-600/20 rounded-full blur-[100px]"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-600/20 rounded-full blur-[100px]"})]}),(0,a.jsxs)("header",{className:"w-full max-w-6xl mx-auto p-4 flex items-center justify-between z-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400",children:g}),(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-white/5 rounded-full border border-white/10 cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>{h&&(navigator.clipboard.writeText(h),j(!0),setTimeout(()=>j(!1),2e3))},children:[(0,a.jsxs)("span",{className:"text-sm font-mono text-gray-400",children:["#",h]}),_?a.jsx(l.Z,{className:"w-3 h-3 text-green-400"}):a.jsx(o.Z,{className:"w-3 h-3 text-gray-500"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[b&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-400",children:"Manche"}),(0,a.jsxs)("span",{className:"font-mono font-bold",children:[u,"/",f]})]}),(0,a.jsxs)("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full border ${5>=(v||0)&&b?"bg-red-500/20 border-red-500/50 text-red-400 animate-pulse":"bg-white/5 border-white/10 text-white"}`,children:[a.jsx(n.Z,{className:"w-4 h-4"}),a.jsx("span",{className:"font-mono font-bold min-w-[3ch] text-center",children:x})]})]})]}),a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4 w-full max-w-6xl mx-auto z-10",children:m}),a.jsx("footer",{className:"w-full bg-black/20 backdrop-blur-md border-t border-white/5 p-4 z-10",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto flex flex-col gap-2",children:[y&&(0,a.jsxs)("div",{className:"text-xs text-gray-400 animate-pulse mb-2",children:[y," est en train d'\xe9crire..."]}),a.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4",children:c&&Object.entries(c).sort(([,e],[,t])=>t-e).map(([e,t])=>(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-white/5 px-3 py-1.5 rounded-full border border-white/10",children:[a.jsx(i.Z,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium",children:e}),a.jsx("span",{className:"text-xs font-mono bg-white/10 px-1.5 py-0.5 rounded text-gray-300",children:t})]},e))})]})})]})}},2368:(e,t,s)=>{"use strict";s.d(t,{d:()=>l});var a=s(3729),r=s(6234);function l(e,t){let[s,l]=(0,a.useState)("waiting"),[o,n]=(0,a.useState)([]),[i,d]=(0,a.useState)(null),[m,c]=(0,a.useState)(!1),[u,f]=(0,a.useState)(null),[x,h]=(0,a.useState)(null),g=(0,a.useRef)(null);(0,a.useEffect)(()=>{e&&(async()=>{let t;let{data:s,error:a}=await r.O.from("rooms").select("*").eq("code",e).maybeSingle();if(a||!s){console.error("Room not found:",a);return}h(s.id),l(s.status);let o=sessionStorage.getItem("playerName")||`Player-${Math.floor(1e3*Math.random())}`,i=sessionStorage.getItem("playerId");if(i){let{data:e}=await r.O.from("players").select("*").eq("id",i).maybeSingle();e&&(t=e)}if(!t){let{data:e}=await r.O.from("players").select("*").eq("room_id",s.id).eq("name",o).maybeSingle();e&&(t=e)}if(!t){let{data:e,error:a}=await r.O.from("players").insert({room_id:s.id,name:o,is_host:!s.host_id}).select().single();e&&(t=e,sessionStorage.setItem("playerId",e.id),s.host_id||(await r.O.from("rooms").update({host_id:e.id}).eq("id",s.id),await r.O.from("players").update({is_host:!0}).eq("id",e.id),c(!0)))}t&&(f(t.id),c(t.is_host),t.is_host&&s.host_id!==t.id&&await r.O.from("rooms").update({host_id:t.id}).eq("id",s.id));let{data:m}=await r.O.from("game_sessions").select("*").eq("room_id",s.id).maybeSingle();if(m)d({current_round:m.current_round,total_rounds:m.total_rounds,round_data:m.round_data,answers:m.answers,status:m.status,settings:s.settings});else if(t?.is_host){let{data:e}=await r.O.from("game_sessions").insert({room_id:s.id,status:"waiting",settings:s.settings}).select().single();e&&d(e)}let{data:u}=await r.O.from("players").select("*").eq("room_id",s.id);u&&n(u)})()},[e]),(0,a.useEffect)(()=>{if(!x)return;let e=r.O.channel(`game_sync:${x}`).on("postgres_changes",{event:"*",schema:"public",table:"rooms",filter:`id=eq.${x}`},e=>{e.new&&(l(e.new.status),i&&d(t=>t?{...t,settings:e.new.settings}:null))}).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`room_id=eq.${x}`},async()=>{let{data:e}=await r.O.from("players").select("*").eq("room_id",x);e&&n(e)}).on("postgres_changes",{event:"*",schema:"public",table:"game_sessions",filter:`room_id=eq.${x}`},e=>{e.new&&d(t=>({...t,...e.new}))}).subscribe();return g.current=e,()=>{r.O.removeChannel(e)}},[x]),(0,a.useEffect)(()=>{if(!u)return;let e=async()=>{await r.O.from("players").update({last_seen_at:new Date().toISOString()}).eq("id",u)};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[u]),(0,a.useEffect)(()=>{if(!m||!x)return;let e=setInterval(async()=>{let e=new Date(Date.now()-12e4).toISOString();await r.O.from("players").delete().eq("room_id",x).lt("last_seen_at",e)},6e4);return()=>clearInterval(e)},[m,x]),(0,a.useEffect)(()=>{if(!x||!o.length)return;let e=setInterval(async()=>{let e=o.find(e=>e.is_host);if(e&&e.last_seen_at){let t=new Date(e.last_seen_at).getTime();Date.now()-t>15e4&&(console.log("Host inactive, closing room..."),"closed"!==s&&await r.O.from("rooms").update({status:"closed"}).eq("id",x))}},3e4);return()=>clearInterval(e)},[x,o,s]),(0,a.useEffect)(()=>{if(!u)return},[u]);let p=async e=>{if(!x||!m)return;let{error:t}=await r.O.from("rooms").update({settings:e}).eq("id",x);t&&console.error("Error updating settings (useGameSync):",t,e)},b=async(e={})=>{x&&m&&(await r.O.from("rooms").update({status:"in_game"}).eq("id",x),await r.O.from("game_sessions").update({status:"round_active",current_round:1,answers:{},round_data:e}).eq("room_id",x))},w=async e=>{if(!x||!u||!i)return;let t={...i.answers,[u]:{answer:e,time:Date.now()}};await r.O.from("game_sessions").update({answers:t}).eq("room_id",x)},v=async(e={})=>{if(!x||!m||!i)return;let t=i.current_round+1;t>i.total_rounds?(await r.O.from("rooms").update({status:"finished"}).eq("id",x),await r.O.from("game_sessions").update({status:"game_over"}).eq("room_id",x)):await r.O.from("game_sessions").update({current_round:t,answers:{},status:"round_active",round_data:e}).eq("room_id",x)},y=async e=>{x&&m&&await r.O.from("game_sessions").update({round_data:e}).eq("room_id",x)},_=async e=>{x&&m&&await r.O.from("game_sessions").update({status:e}).eq("room_id",x)},j=async(e,t)=>{x&&m&&await r.O.from("players").update({score:t}).eq("id",e)};return{roomStatus:s,players:o,gameState:i,isHost:m,playerId:u,updateSettings:p,startGame:b,submitAnswer:w,nextRound:v,updateRoundData:y,setGameStatus:_,updatePlayerScore:j}}},6234:(e,t,s)=>{"use strict";s.d(t,{O:()=>a});let a=(0,s(1616).eI)("https://vyatvqwsoqalbnbcmhqm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ5YXR2cXdzb3FhbGJuYmNtaHFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE3ODkzMDcsImV4cCI6MjA4NzM2NTMwN30.KoTP3iOZmvbzB8RjHlmWIyvdMVpfqoia3-MQxbdL1sY")},1626:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(6815),r=s(9377);function l(...e){return(0,r.m6)((0,a.W)(e))}},5560:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u,metadata:()=>c});var a=s(5036),r=s(265),l=s.n(r);s(7272);var o=s(6843);let n=(0,o.createProxy)(String.raw`C:\Users\masso\Desktop\IttolecHub\components\ThemeProvider.tsx`),{__esModule:i,$$typeof:d}=n;n.default;let m=(0,o.createProxy)(String.raw`C:\Users\masso\Desktop\IttolecHub\components\ThemeProvider.tsx#ThemeProvider`),c={title:"ItollecHub - Mini-jeux multijoueurs",description:"Plateforme de mini-jeux Guessr multijoueurs bas\xe9s sur des APIs publiques"};function u({children:e}){return(0,a.jsxs)("html",{lang:"fr",suppressHydrationWarning:!0,children:[a.jsx("head",{children:a.jsx("script",{dangerouslySetInnerHTML:{__html:"(function(){var t=localStorage.getItem('theme');document.documentElement.classList.toggle('dark',t!=='light');})();"}})}),a.jsx("body",{className:l().className,children:a.jsx(m,{children:e})})]})}},7272:()=>{}};