"use strict";exports.id=324,exports.ids=[324],exports.modules={5282:(e,t,s)=>{s.d(t,{I:()=>r});var a=s(5344),l=s(1626);let r=(0,s(3729).forwardRef)(({className:e,...t},s)=>a.jsx("input",{ref:s,className:(0,l.cn)("flex h-10 w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm","placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","disabled:cursor-not-allowed disabled:opacity-50","dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100 dark:placeholder:text-slate-400",e),...t}));r.displayName="Input"},2324:(e,t,s)=>{s.d(t,{Z:()=>y});var a=s(5344),l=s(3729),r=s(240),n=s(3511),d=s(1688),c=s(7189),i=s(7060),o=s(3229),x=s(782),m=s(2254);function u({imageUrl:e,revealed:t,blurLevel:s}){let l=t?"blur-none":`blur-[${s}px]`;return a.jsx("div",{className:"relative w-full h-full flex-1 flex items-center justify-center",children:a.jsx("img",{src:e,alt:"Pokemon \xe0 deviner",className:`transition-all duration-1000 object-contain max-w-full max-h-full ${l}`,style:{imageRendering:"pixelated"}})})}var p=s(5282),h=s(6135);function g({guess:e,setGuess:t,handleGuess:s,disabled:l}){return(0,a.jsxs)("form",{onSubmit:s,className:"flex gap-2",children:[a.jsx(p.I,{type:"text",placeholder:"Nom du Pok\xe9mon...",value:e,onChange:e=>t(e.target.value),className:"rounded-xl flex-grow",disabled:l}),a.jsx(n.z,{type:"submit",className:"rounded-xl",disabled:l,children:a.jsx(h.Z,{className:"h-5 w-5"})})]})}var f=s(435),b=s(3319);function y({roomCode:e,settings:t}){if(!e)return a.jsx("div",{children:"Code de room non sp\xe9cifi\xe9."});(0,m.useRouter)();let[s,p]=(0,l.useState)(null),[h,y]=(0,l.useState)(""),[j,k]=(0,l.useState)([]),[N,v]=(0,l.useState)(!1),[w,S]=(0,l.useState)(null),[Z,I]=(0,l.useState)(!1),[C,_]=(0,l.useState)([]),[z,E]=(0,l.useState)(!1),[L,M]=(0,l.useState)(0),[P,R]=(0,l.useState)(5),[$,q]=(0,l.useState)(30),[G,A]=(0,l.useState)(null),[T,U]=(0,l.useState)(20),[V,D]=(0,l.useState)(9),{broadcast:H,messages:O}=(0,d.r)(e,"pokeguessr"),X="true"===sessionStorage.getItem("isHost"),B=sessionStorage.getItem("playerName")||"Anonyme";(0,l.useEffect)(()=>{t&&(t.rounds&&R(parseInt(t.rounds)),t.time&&q(parseInt(t.time)),t.gen&&D(parseInt(t.gen)))},[t]);let F=async()=>{if(X){if(L>=P){E(!0),H({type:"game_end",data:{players:C}});return}try{let e=await fetch(`/api/games/pokemon?gen=${V}`),s=await e.json(),a={type:"round_start",data:s};H(a),J(a),q(t?.time?parseInt(t.time):30),U(20),A(null)}catch(e){console.error("Erreur d\xe9marrage manche:",e)}}},J=e=>{if(e)switch(e.type){case"round_start":p(e.data),v(!0),S(null),I(!1),k([]),y(""),M(e=>e+1);break;case"player_guess":k(t=>{let s=[...t,e.data.player];return Array.from(new Set(s))});break;case"round_end":w||(S(e.data.winner),I(!0));break;case"game_end":E(!0),e.data.players&&_(e.data.players)}};return((0,l.useEffect)(()=>{J(O[O.length-1])},[O]),(0,l.useEffect)(()=>{let e;return N&&!Z&&$>0&&(e=setInterval(()=>{q(e=>e<=1?(I(!0),0):e-1)},1e3)),()=>clearInterval(e)},[N,Z,$]),(0,l.useEffect)(()=>{let e;return N&&!Z&&(e=setInterval(()=>{U(e=>Math.max(0,e-2))},1e4)),()=>clearInterval(e)},[N,Z]),(0,l.useEffect)(()=>{B&&0===C.length&&_([{name:B,score:0}])},[B]),z)?a.jsx(b.Z,{players:C,roomCode:e,onReplay:()=>{E(!1),_([]),M(0),v(!1),S(null),I(!1),k([]),y(""),p(null)}}):a.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100 p-4 sm:p-6 game-layout",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto flex flex-col gap-4 sm:gap-6",children:[N&&!Z&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[a.jsx(c.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Temps restant"})]}),(0,a.jsxs)("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[$,"s"]})]}),a.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-red-500 dark:bg-red-600 rounded-full transition-all duration-1000",style:{width:`${$/(t?.time?parseInt(t.time,10):30)*100}%`}})})]}),null!==G&&(0,a.jsxs)("div",{className:`p-3 rounded-2xl flex items-center gap-2 ${G?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-200"}`,children:[G?a.jsx(i.Z,{className:"h-4 w-4"}):a.jsx(o.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:G?"Correct !":"Incorrect"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100",children:"PokeGuessr"}),(0,a.jsxs)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:["Manche ",L,"/",P," â€¢ Score : ",C.find(e=>e.name===B)?.score??0]})]}),!N&&X&&(0,a.jsxs)(r.Z,{className:"p-6 sm:p-8 text-center",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Pr\xeat \xe0 deviner ?"}),a.jsx(n.z,{onClick:F,className:"rounded-2xl bg-red-600 hover:bg-red-700 text-white px-8 py-3",children:"Commencer la partie"})]}),!N&&!X&&(0,a.jsxs)(r.Z,{className:"p-6 sm:p-8 text-center",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"En attente de l'h\xf4te"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"L'h\xf4te va lancer la partie."})]}),N&&(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[s&&a.jsx(u,{imageUrl:s.imageUrl,revealed:Z,blurLevel:T}),!w&&a.jsx(g,{guess:h,setGuess:y,handleGuess:e=>{if(e.preventDefault(),!h.trim()||!s||w)return;let t=Object.values(s.names).some(e=>e.toLowerCase()===h.toLowerCase().trim());if(A(t),setTimeout(()=>A(null),2e3),H({type:"player_guess",data:{player:B,isCorrect:t}}),t&&!w){_(e=>{let t=[...e],s=t.find(e=>e.name===B);return s?s.score+=10:t.push({name:B,score:10}),t});let e={type:"round_end",data:{winner:B}};H(e),J(e)}y("")},disabled:!!w||j.includes(B)}),a.jsx(f.Z,{answeredPlayers:j}),w&&(0,a.jsxs)(r.Z,{className:"p-6 sm:p-8 text-center bg-green-100 dark:bg-green-900/40 border-green-200 dark:border-green-800",children:[a.jsx(x.Z,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),(0,a.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold text-green-800 dark:text-green-200",children:[w," a trouv\xe9 !"]}),(0,a.jsxs)("p",{className:"text-slate-700 dark:text-slate-300 mt-2",children:["R\xe9ponse : ",a.jsx("span",{className:"font-bold text-slate-900 dark:text-slate-100",children:s?.names.fr})]}),X&&a.jsx(n.z,{onClick:F,className:"mt-6 rounded-2xl",children:L>=P?"Voir les scores":"Manche suivante"})]})]})]})})}},7060:(e,t,s)=>{s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7189:(e,t,s)=>{s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6135:(e,t,s)=>{s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},3229:(e,t,s)=>{s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}};